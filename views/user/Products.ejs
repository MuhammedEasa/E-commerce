<%-include('header') %>
<style>
  .single-product .product-image {
    height: 200px;
    object-fit: fill; 
}

</style>
<!-- Start Header Area -->
<header class="header_area sticky-header">
    <div class="main_menu">
      <nav class="navbar navbar-expand-lg navbar-light main_box">
        <div class="container">
          <!-- Brand and toggle get grouped for better mobile display -->
          <a class="navbar-brand logo_h" href="/"
            ><img src="img/logo.png" alt="E-Cart"
          /></a>
          <button
            class="navbar-toggler"
            type="button"
            data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <!-- Collect the nav links, forms, and other content for toggling -->
          <div
            class="collapse navbar-collapse offset"
            id="navbarSupportedContent"
          >
            <ul class="nav navbar-nav menu_nav ml-auto">
              <li class="nav-item ">
                <a class="nav-link" href="/">Home</a>
              </li>
              <li class="nav-item active">
                <a href="/Products" class="nav-link" role="button">Shop Category</a>
              </li>
              <li class="nav-item">
                <a href="/cart/<%= userId %>" class="nav-link" role="button"
                  >Cart</a
                >
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/contact">Contact</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/Account/<%= userId %>">
                  <%= userName ? userName : 'User' %>
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    height="1em"
                    viewBox="0 0 448 512"
                  >
                    <path
                      d="M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512H418.3c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304H178.3z"
                    />
                  </svg>
                </a>
              </li>
              <li class="nav-item">
                <a href="/logout" class="nav-link" role="button" id="logout-button">Logout</a>
              </li>
            </ul>
          </div>
        </div>
      </nav>
    </div>
  </header>
  <!-- End Header Area -->

<!-- Start Banner Area -->
<section class="banner-area organic-breadcrumb">
    <div class="container">
        <div class="breadcrumb-banner d-flex flex-wrap align-items-center justify-content-end">
            <div class="col-first">
                <h1>Shop Category page</h1>
                <nav class="d-flex align-items-center">
                    <a href="#">Home<span class="lnr lnr-arrow-right"></span></a>
                    <a href="#">Shop<span class="lnr lnr-arrow-right"></span></a>
                    <a href="#">All Category</a>
                </nav>
            </div>
        </div>
    </div>
</section>
<!-- End Banner Area -->

<!-- Filter And PRoduct Area Starting -->

<div class="container">
  <div class="row">
      <div class="col-xl-3 col-lg-4 col-md-5">
          <div class="sidebar-categories">
              <div class="head">Browse Categories</div>
              <ul class="main-categories">
                  <li class="main-nav-list"><a  aria-controls="Shoes"><span
                           class="lnr lnr-arrow-right"></span>Shoes<span class="number">(15)</span></a>
                  </li>

                  <li class="main-nav-list"><a " aria-controls="Laptops"><span
                           class="lnr lnr-arrow-right"></span>Laptops<span class="number">(35)</span></a>
                  </li>
                  <li class="main-nav-list"><a " aria-controls="Gadgets"><span
                      class="lnr lnr-arrow-right"></span>Gadgets<span class="number">(50)</span></a>
                         </li>
                
                <li class="main-nav-list"><a " aria-controls="SmartPhones"><span
                 class="lnr lnr-arrow-right"></span>SmartPhones<span class="number">(25)</span></a>
                  </li>
                
                 
              </ul>
          </div>
          <div class="sidebar-filter mt-50" >
              <div class="top-filter-head">Product Filters</div>
              <div class="common-filter">
                  <div class="head">Brands</div>
                  <form action="#">
                      <ul>
                          <li class="filter-list"><input class="pixel-radio" type="radio" id="apple" name="brand"><label for="apple">Apple<span>(29)</span></label></li>
                          <li class="filter-list"><input class="pixel-radio" type="radio" id="asus" name="brand"><label for="asus">Asus<span>(29)</span></label></li>
                          <li class="filter-list"><input class="pixel-radio" type="radio" id="gionee" name="brand"><label for="gionee">Samsung<span>(19)</span></label></li>
                          <li class="filter-list"><input class="pixel-radio" type="radio" id="micromax" name="brand"><label for="micromax">Jordan<span>(19)</span></label></li>
                          <li class="filter-list"><input class="pixel-radio" type="radio" id="samsung" name="brand"><label for="samsung">Sony<span>(19)</span></label></li>
                      </ul>
                  </form>
              </div>
              <div class="common-filter">
                          <div class="head">Color</div>
                          <form action="#">
                      <ul>
                          <li class="filter-list"><input class="pixel-radio" type="radio" id="black" name="color"><label for="black">Black<span>(29)</span></label></li>
                          <li class="filter-list"><input class="pixel-radio" type="radio" id="balckleather" name="color"><label for="balckleather">Black
                                  Leather<span>(29)</span></label></li>
                          <li class="filter-list"><input class="pixel-radio" type="radio" id="blackred" name="color"><label for="blackred">Black
                                  with red<span>(19)</span></label></li>
                          <li class="filter-list"><input class="pixel-radio" type="radio" id="gold" name="color"><label for="gold">Gold<span>(19)</span></label></li>
                          <li class="filter-list"><input class="pixel-radio" type="radio" id="spacegrey" name="color"><label for="spacegrey">Spacegrey<span>(19)</span></label></li>
                              </ul>
                               </form>
                      </div>
                <div class="common-filter">
                      <div class="head">Price</div>
                          <div class="price-range-area">
                             <div id="price-range"></div>
                                   <div class="value-wrapper d-flex">
                          <div class="price">Price:</div>
                          <span>₹</span>
                          <div id="lower-value"></div>
                          <div class="to">to</div>
                          <span>₹</span>
                          <div id="upper-value"></div>
                      </div>
                  </div>
              </div>
          </div>
      </div>
      <div class="col-xl-9 col-lg-8 col-md-7">
          <!-- Start Filter Bar -->
          <div class="filter-bar d-flex flex-wrap align-items-center">
              <div class="pagination justify-content-center mt-2 mb-2">
                <% if (currentPage > 1) { %>
                  <a href="?page=<%= parseInt(currentPage) - 1 %>" class="prev-arrow" aria-label="Previous">
                    <i class="fa fa-long-arrow-left" aria-hidden="true"></i>
                  </a>
                <% } %>
                <% for (let i = 1; i <= totalPages; i++) { %>
                  <a href="?page=<%= i %>" class="<%= i === parseInt(currentPage) ? 'active page-link' : 'page-link' %>">
                    <%= i %>
                  </a>
                <% } %>
                <% if (currentPage < totalPages) { %>
                  <a href="?page=<%= parseInt(currentPage) + 1 %>" class="next-arrow" aria-label="Next">
                    <i class="fa fa-long-arrow-right" aria-hidden="true"></i>
                    <% console.log(currentPage) %>
                  </a>
                <% } %>
              </div>
            

          </div>
          <!-- End Filter Bar -->

          <!-- Start Best Seller -->
          <section class="lattest-product-area pb-40 category-list">
            <div class="row">
                <!-- All products should be in this single row -->
                <% if(products.length > 0) { %>
                <% products.forEach((product, index) => { %>
                    <% if(product.isListed === true) { %>
                        <div class="col-lg-4 col-md-6">
                            <div class="single-product">
                                <a href="/productdetails/<%= product._id %>">
                                    <img class="img-fluid product-image" src="<%= product.image[0] %>" alt="<%= product.productname %>"></a>
                                <div class="product-details">
                                    <h6><%= product.model %></h6>
                                    <div class="price">
                                        <h6>₹<%= product.price %></h6>
                                       
                                    </div>
                                    <div class="prd-bottom">
                                        <!-- some code here -->
                                        <a href="/addtocart/<%= product._id %>/<%= userId %>" class="social-info">
                                        <span class="ti-bag"></span>
                                        <p class="hover-text">add to bag</p>
                                    </a>
                                    <a href="" class="social-info">
                                        <span class="lnr lnr-heart"></span>
                                        <p class="hover-text">Wishlist</p>
                                    </a>
                                    <a href="" class="social-info">
                                        <span class="lnr lnr-sync"></span>
                                        <p class="hover-text">compare</p>
                                    </a>
                                    <a href="" class="social-info">
                                        <span class="lnr lnr-move"></span>
                                        <p class="hover-text">view more</p>
                                    </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    <% } %>
                <% }); %>
                <% } else { %>
                  <p>No products available</p>
                  <% } %>
            </div>
        </section>
          <!-- End Product Seller -->
       
      </div>
  </div>
</div>




<!-- Filter And PRoduct Area Ending -->





<!-- Start Footer Area -->

<footer class="footer-area section_gap">
    <div class="container">
      <div class="row">
        <div class="col-lg-3 col-md-6 col-sm-6">
          <div class="single-footer-widget">
            <h6>About Us</h6>
            <p>
              Discover endless shopping possibilities at E-Cart. We offer quality
              shoes, laptops, headphones, and more, ensuring convenience and
              satisfaction.
            </p>
          </div>
        </div>
  
        <div class="col-lg-4 col-md-6 col-sm-6">
          <div class="single-footer-widget">
            <h6>Newsletter</h6>
            <p>Stay update with our latest</p>
            <div class="" id="mc_embed_signup">
              <form
                target="_blank"
                novalidate="true"
                action="#"
                method="get"
                class="form-inline"
              >
                <div class="d-flex flex-row">
                  <input
                    class="form-control"
                    name="EMAIL"
                    placeholder="Enter Email"
                    onfocus="this.placeholder = ''"
                    onblur="this.placeholder = 'Enter Email '"
                    required=""
                    type="email"
                  />
  
                  <button class="click-btn btn btn-default">
                    <i class="fa fa-long-arrow-right" aria-hidden="true"></i>
                  </button>
                  <div style="position: absolute; left: -5000px">
                    <input
                      name="b_36c4fd991d266f23781ded980_aefe40901a"
                      tabindex="-1"
                      value=""
                      type="text"
                    />
                  </div>
  
                  <!-- <div class="col-lg-4 col-md-4">
                                                  <button class="bb-btn btn"><span class="lnr lnr-arrow-right"></span></button>
                                              </div>  -->
                </div>
                <div class="info"></div>
              </form>
            </div>
          </div>
        </div>
  
        <div class="col-lg-3 col-md-6 col-sm-6">
          <div class="single-footer-widget mail-chimp">
            <h6 class="mb-20">Customer Assistance</h6>
            <ul class="instafeed d-flex flex-wrap">
              <li><p>Help</p></li>
              <li><p>Chat</p></li>
              <li><p>Support</p></li>
            </ul>
          </div>
        </div>
  
        <div class="col-lg-2 col-md-6 col-sm-6">
          <div class="single-footer-widget">
            <h6>Follow Us</h6>
            <p>Let us be social</p>
            <div class="footer-social d-flex align-items-center">
              <a href="https://www.facebook.com/muhammedeasa.muhammedeasa.1/"><i class="fa fa-facebook"></i></a>
              <a href="https://twitter.com/Pavamgamer"><i class="fa fa-twitter"></i></a>
              <a href="https://www.instagram.com/al_hafiz_muhammed_easa?igshid=NGVhN2U2NjQ0Yg=="><i class="fa fa-instagram"></i></a>
              <a href="https://www.linkedin.com/feed/"><i class="fa fa-linkedin"></i></a>
            </div>
          </div>
        </div>
      </div>
      <div
        class="footer-bottom d-flex justify-content-center align-items-center flex-wrap"
      >
        <p class="footer-text m-0">
          <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
          Copyright &copy;
          <script>
            document.write(new Date().getFullYear());
          </script>
          All rights reserved | This template is made with
          <i class="fa fa-heart-o" aria-hidden="true"></i> by
          <a href="https://colorlib.com" target="_blank">Colorlib</a>
          <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
        </p>
      </div>
    </div>
  </footer>
<!-- ================ End footer Area ================= -->

<!-- Include SweetAlert2 CSS and JS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const logoutButton = document.getElementById("logout-button");

    if (logoutButton) {
      logoutButton.addEventListener("click", function (e) {
        e.preventDefault(); // Prevent the default link behavior

        // Use SweetAlert2 for confirmation
        Swal.fire({
          title: "Are you sure?",
          text: "Do you really want to logout?",
          icon: "question",
          showCancelButton: true,
          confirmButtonText: "Yes, logout",
          cancelButtonText: "No, cancel"
        }).then((result) => {
          if (result.isConfirmed) {
            // If the user confirms, redirect to the logout page
            window.location.href = "/logout";
          }
        });
      });
    }
  });
</script>


<%-include('footer') %>